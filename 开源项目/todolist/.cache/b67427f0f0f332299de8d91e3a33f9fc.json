{"dependencies":[],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.h = h;\nexports.app = app;\nfunction h(name, props) {\n  var node;\n  var rest = [];\n  var children = [];\n  var length = arguments.length;\n\n  while (length-- > 2) {\n    rest.push(arguments[length]);\n  }while (rest.length) {\n    if (Array.isArray(node = rest.pop())) {\n      for (length = node.length; length--;) {\n        rest.push(node[length]);\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node);\n    }\n  }\n\n  return typeof name === \"function\" ? name(props || {}, children) : {\n    name: name,\n    props: props || {},\n    children: children\n  };\n}\n\nfunction app(state, actions, view, container) {\n  var renderLock;\n  var invokeLaterStack = [];\n  var rootElement = container && container.children[0] || null;\n  var lastNode = rootElement && toVNode(rootElement, [].map);\n  var globalState = copy(state);\n  var wiredActions = copy(actions);\n\n  scheduleRender(wireStateToActions([], globalState, wiredActions));\n\n  return wiredActions;\n\n  function toVNode(element, map) {\n    return {\n      name: element.nodeName.toLowerCase(),\n      props: {},\n      children: map.call(element.childNodes, function (element) {\n        return element.nodeType === 3 ? element.nodeValue : toVNode(element, map);\n      })\n    };\n  }\n\n  function render() {\n    renderLock = !renderLock;\n\n    var next = view(globalState, wiredActions);\n    if (container && !renderLock) {\n      rootElement = patch(container, rootElement, lastNode, lastNode = next);\n    }\n\n    while (next = invokeLaterStack.pop()) {\n      next();\n    }\n  }\n\n  function scheduleRender() {\n    if (!renderLock) {\n      renderLock = !renderLock;\n      setTimeout(render);\n    }\n  }\n\n  function copy(target, source) {\n    var obj = {};\n\n    for (var i in target) {\n      obj[i] = target[i];\n    }for (var i in source) {\n      obj[i] = source[i];\n    }return obj;\n  }\n\n  function set(path, value, source) {\n    var target = {};\n    if (path.length) {\n      target[path[0]] = path.length > 1 ? set(path.slice(1), value, source[path[0]]) : value;\n      return copy(source, target);\n    }\n    return value;\n  }\n\n  function get(path, source) {\n    for (var i = 0; i < path.length; i++) {\n      source = source[path[i]];\n    }\n    return source;\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\" ? function (key, action) {\n        actions[key] = function (data) {\n          if (typeof (data = action(data)) === \"function\") {\n            data = data(get(path, globalState), actions);\n          }\n\n          if (data && data !== (state = get(path, globalState)) && !data.then // Promise\n          ) {\n              scheduleRender(globalState = set(path, copy(state, data), globalState));\n            }\n\n          return data;\n        };\n      }(key, actions[key]) : wireStateToActions(path.concat(key), state[key] = state[key] || {}, actions[key] = copy(actions[key]));\n    }\n  }\n\n  function getKey(node) {\n    return node && node.props ? node.props.key : null;\n  }\n\n  function setElementProp(element, name, value, isSVG, oldValue) {\n    if (name === \"key\") {} else if (name === \"style\") {\n      for (var i in copy(oldValue, value)) {\n        element[name][i] = value == null || value[i] == null ? \"\" : value[i];\n      }\n    } else {\n      if (typeof value === \"function\" || name in element && !isSVG) {\n        element[name] = value == null ? \"\" : value;\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value);\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name);\n      }\n    }\n  }\n\n  function createElement(node, isSVG) {\n    var element = typeof node === \"string\" || typeof node === \"number\" ? document.createTextNode(node) : (isSVG = isSVG || node.name === \"svg\") ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.name) : document.createElement(node.name);\n\n    if (node.props) {\n      if (node.props.oncreate) {\n        invokeLaterStack.push(function () {\n          node.props.oncreate(element);\n        });\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(createElement(node.children[i], isSVG));\n      }\n\n      for (var name in node.props) {\n        setElementProp(element, name, node.props[name], isSVG);\n      }\n    }\n\n    return element;\n  }\n\n  function updateElement(element, oldProps, props, isSVG) {\n    for (var name in copy(oldProps, props)) {\n      if (props[name] !== (name === \"value\" || name === \"checked\" ? element[name] : oldProps[name])) {\n        setElementProp(element, name, props[name], isSVG, oldProps[name]);\n      }\n    }\n\n    if (props.onupdate) {\n      invokeLaterStack.push(function () {\n        props.onupdate(element, oldProps);\n      });\n    }\n  }\n\n  function removeChildren(element, node, props) {\n    if (props = node.props) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i]);\n      }\n\n      if (props.ondestroy) {\n        props.ondestroy(element);\n      }\n    }\n    return element;\n  }\n\n  function removeElement(parent, element, node, cb) {\n    function done() {\n      parent.removeChild(removeChildren(element, node));\n    }\n\n    if (node.props && (cb = node.props.onremove)) {\n      cb(element, done);\n    } else {\n      done();\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSVG, nextSibling) {\n    if (node === oldNode) {} else if (oldNode == null) {\n      element = parent.insertBefore(createElement(node, isSVG), element);\n    } else if (node.name && node.name === oldNode.name) {\n      updateElement(element, oldNode.props, node.props, isSVG = isSVG || node.name === \"svg\");\n\n      var oldElements = [];\n      var oldKeyed = {};\n      var newKeyed = {};\n\n      for (var i = 0; i < oldNode.children.length; i++) {\n        oldElements[i] = element.childNodes[i];\n\n        var oldChild = oldNode.children[i];\n        var oldKey = getKey(oldChild);\n\n        if (null != oldKey) {\n          oldKeyed[oldKey] = [oldElements[i], oldChild];\n        }\n      }\n\n      var i = 0;\n      var j = 0;\n\n      while (j < node.children.length) {\n        var oldChild = oldNode.children[i];\n        var newChild = node.children[j];\n\n        var oldKey = getKey(oldChild);\n        var newKey = getKey(newChild);\n\n        if (newKeyed[oldKey]) {\n          i++;\n          continue;\n        }\n\n        if (newKey == null) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChild, newChild, isSVG);\n            j++;\n          }\n          i++;\n        } else {\n          var recyledNode = oldKeyed[newKey] || [];\n\n          if (oldKey === newKey) {\n            patch(element, recyledNode[0], recyledNode[1], newChild, isSVG);\n            i++;\n          } else if (recyledNode[0]) {\n            patch(element, element.insertBefore(recyledNode[0], oldElements[i]), recyledNode[1], newChild, isSVG);\n          } else {\n            patch(element, oldElements[i], null, newChild, isSVG);\n          }\n\n          j++;\n          newKeyed[newKey] = newChild;\n        }\n      }\n\n      while (i < oldNode.children.length) {\n        var oldChild = oldNode.children[i];\n        if (getKey(oldChild) == null) {\n          removeElement(element, oldElements[i], oldChild);\n        }\n        i++;\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[oldKeyed[i][1].props.key]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1]);\n        }\n      }\n    } else if (node.name === oldNode.name) {\n      element.nodeValue = node;\n    } else {\n      element = parent.insertBefore(createElement(node, isSVG), nextSibling = element);\n      removeElement(parent, nextSibling, oldNode);\n    }\n    return element;\n  }\n}"},"hash":"911e422b92ecadc01ea049c449a76987"}